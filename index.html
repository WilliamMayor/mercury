<!doctype html>
<html lang="en">
    <head>
        <script src="src-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="jquery.js" type="text/javascript"></script>
        <script src="brython.js" type="text/javascript"></script>
        <script src="script.js" type="text/javascript"></script>
        <link href="style.css" rel="stylesheet" media="screen">
    </head>
    <body>
        <div id="header">
            <h1>Summer Challenge 2013 - Can You Hack It?</h1>
            <a href="#save" id="save">Save</a>
        </div>
        <div id="container">
            <div id="encrypt">
                <h1>Encrypt</h1>
                <div class="instructions">
                    <ol>
                        <li>Use the Plaintext box to provide a message to be encrypted.</li>
                        <li>Use the code editor to write the code that will encrypt the message.</li>
                        <li>Press the 'Encrypt' button at the bottom to run your code on your plaintext.</li>
                    </ol>
                </div>
                <label>Plaintext:</label><input type="text" class="plaintext" placeholder="e.g. hello"/>
                <div id="encrypt_editor">whitespace = ' \t\n\r\v\f'
ascii_lowercase = 'abcdefghijklmnopqrstuvwxyz'
ascii_uppercase = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'
ascii_letters = ascii_lowercase + ascii_uppercase
digits = '0123456789'
punctuation = """!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~"""
printable = digits + ascii_letters + punctuation + whitespace

def encrypt(plaintext):
    info('Performing Caesar cipher shift')
    key = 17
    info('Using shift of %d' % key)
    ciphertext = []
    for i, c in enumerate(plaintext):
        index = printable.find(c)
        if index == -1:
            message = 'Character %d in plaintext not shiftable' % (i+1)
            error(message)
            raise Exception(message)
        ciphertext += printable[(index + key) % len(printable)]
    return ''.join(ciphertext)
                </div>
                <div class="controls">
                    <a href="#encrypt" class="execute">Encrypt</a>
                    <p class="ciphertext">Ciphertext: <span></span></p>
                </div>
            </div>
            <div id="decrypt">
                <h1>Decrypt</h1>
                <div class="instructions">
                    <ol>
                        <li>Put the ciphertext in box.</li>
                        <li>Use the code editor to write the code that will decrypt the ciphertext.</li>
                        <li>Press the 'Decrypt' button at the bottom to run your code and hopefully recreate the message.</li>
                    </ol>
                </div>
                <label>Ciphertext:</label><input type="text" class="ciphertext" placeholder="e.g. yvCCF"/>
                <div id="decrypt_editor">whitespace = ' \t\n\r\v\f'
ascii_lowercase = 'abcdefghijklmnopqrstuvwxyz'
ascii_uppercase = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'
ascii_letters = ascii_lowercase + ascii_uppercase
digits = '0123456789'
punctuation = """!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~"""
printable = digits + ascii_letters + punctuation + whitespace

def decrypt(ciphertext):
    info('Performing reverse Caesar cipher shift')
    key = 17
    info('Using shift of %d' % key)
    plaintext = []
    for i, c in enumerate(ciphertext):
        index = printable.find(c)
        if index == -1:
            message = 'Character %d in ciphertext not shiftable' % (i+1)
            error(message)
            raise Exception(message)
        plaintext += printable[(index - key) % len(printable)]
    return ''.join(plaintext)
                </div>
                <div class="controls">
                    <a href="#decrypt" class="execute">Decrypt</a>
                    <p class="plaintext">Plaintext: <span></span></p>
                </div>
            </div>
            </div>
        </div>
        <div id="console">
            <ul id="console_output">
                <li class="info">Welcome to the Mercury extension builder.</li>
                <li class="info">Useful information will appear in this console.</li>
                <li class="info">You can output information here using; info(message), success(message), and error(message).</li>
            </ul>
        </div>
    </body>
</html>